import{d as V,u as b,_ as S,o as i,c as _,a as r,t as w,b as $,r as h,w as y,e as l,f as U,g as k,v as I}from"./index-CK4800cF.js";const x=V("user",{state:()=>({user:null,rating:null,comment:"",error:null}),actions:{async fetchUser(s){this.error=null;try{const t=await fetch(`https://reqres.in/api/users/${s}`);if(!t.ok)throw new Error(`Failed to fetch user with id ${s}: ${t.statusText}`);const e=await t.json();this.user=e.data??null;const a=JSON.parse(localStorage.getItem(`user_${s}`));a?(this.rating=a.rating,this.comment=a.comment):(this.rating=5,this.comment="")}catch(t){console.error(t),this.error=t.message}},saveUserData(s,t,e){const a=b();localStorage.setItem(`user_${s}`,JSON.stringify({rating:t,comment:e})),a.setUser(s,{rating:t,comment:e})}},getters:{fullName:s=>s.user?`${s.user.first_name} ${s.user.last_name}`:""}}),N={class:"rating-counter"},C={class:"rating-counter__text"},D={__name:"RatingCounter",props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(s,{emit:t}){const e=s,a=t,n=c=>{a("update:modelValue",e.modelValue+c)};return(c,u)=>(i(),_("div",N,[r("button",{class:"rating-counter__button",onClick:u[0]||(u[0]=o=>n(-1))},"-"),r("span",C,w(s.modelValue),1),r("button",{class:"rating-counter__button",onClick:u[1]||(u[1]=o=>n(1))},"+")]))}},q=S(D,[["__scopeId","data-v-3355a9a0"]]),B={class:"about"},A={key:0,class:"user-card"},E={class:"user-card__content"},J=["src","alt"],M={class:"user-card__content__details"},O={class:"user-card__content__details__name"},R={key:1},T={__name:"AboutView",props:{userId:{type:String,required:!0}},setup(s){const t=s,e=x();$(async()=>{await e.fetchUser(t.userId),a.value=e.rating,n.value=e.comment});const a=h(e.rating),n=h(e.comment),c=async()=>{e.saveUserData(t.userId,a.value,n.value)};return y(()=>t.userId,async()=>{await e.fetchUser(t.userId),a.value=e.rating,n.value=e.comment}),(u,o)=>{var m,p,g,v,f;return i(),_("div",B,[(m=l(e))!=null&&m.user?(i(),_("div",A,[r("div",E,[r("img",{class:"user-card__content__avatar",src:(g=(p=l(e))==null?void 0:p.user)==null?void 0:g.avatar,alt:(v=l(e))==null?void 0:v.fullName},null,8,J),r("div",M,[r("span",O,w((f=l(e))==null?void 0:f.fullName),1),o[2]||(o[2]=r("span",{class:"user-card__content__details__email"},null,-1)),U(q,{class:"user-card__content__details__rating-counter",modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value=d)},null,8,["modelValue"]),k(r("textarea",{class:"user-card__content__details__comment",name:"comment",id:"comment",cols:"30",rows:"5","onUpdate:modelValue":o[1]||(o[1]=d=>n.value=d)},null,512),[[I,n.value]])])]),r("button",{class:"user-card__button",onClick:c}," Save ")])):(i(),_("span",R,"Select the user"))])}}},F=S(T,[["__scopeId","data-v-6178cf0a"]]);export{F as default};
